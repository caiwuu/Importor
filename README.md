# Import

## ä»‹ç»
Importæ˜¯ä¸€æ¬¾é¢å‘ä¸‹ä¸€ä»£webåº”ç”¨ç¨‹åºçš„è½»é‡çº§å¾®å‰ç«¯æ¡†æ¶,ä½¿ç”¨Importå¯ä»¥ä½¿ä¸€ä¸ªå·¨å¤§çš„åº”ç”¨åˆ†ä¸šåŠ¡åˆ†ç³»ç»Ÿå¼€å‘ï¼Œå•ç‹¬é›†æˆï¼Œå•ç‹¬éƒ¨ç½²ï¼Œæœ€ç»ˆé€šè¿‡Importæ„å»ºæˆä¸€ä¸ªåº”ç”¨ã€‚

### å…³äºâ€œå¾®å‰ç«¯â€
> ä¸ä½¿ç”¨ä¸åŒ JavaScript æ¡†æ¶çš„å¤šä¸ªå›¢é˜Ÿæ„å»ºç°ä»£ Web åº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€ç­–ç•¥å’Œæ–¹æ³•ã€‚â€”å¾®å‰ç«¯


å¾®å‰ç«¯çš„æ¦‚å¿µï¼Œæ˜¯åœ¨åç«¯ server less ç›¸å…³æ¦‚å¿µæ—¶å€™å‡ºç°çš„ï¼Œå…¶å®å¤§è‡´çš„æ€è·¯æ˜¯å·®ä¸å¤šçš„ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½ï¼ˆæœåŠ¡ï¼‰ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹è¿è¡Œï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æ‹†åˆ†æˆæ›´å°ï¼Œæ›´æ˜“äºç®¡ç†çš„ å¾®åº”ç”¨

### Import æœ‰ä»€ä¹ˆç‰¹ç‚¹

ğŸ’ƒ ä¸Šæ‰‹ç®€å•ï¼Œä»å§‹è‡³ç»ˆç«™åœ¨å¼€å‘è€…çš„è§’åº¦è®¾è®¡æ¯ä¸€ä¸ªåŠŸèƒ½

ğŸ’ª HTML å…¥å£è®¿é—®æ¨¡å¼ï¼Œä¸åŒæŠ€æœ¯æ ˆå…¼å®¹æ€§å¼º

ğŸ›¡ æ ·å¼éš”ç¦»ï¼Œè§£å†³åº”ç”¨ä¹‹é—´æ ·å¼å†²çª

ğŸ§³ with+Function+proxy å®ç°JSæ²™ç›’ï¼Œå¼ºå¤§çš„è¿è¡Œæ—¶éš”ç¦»

âš¡ é¢„åŠ è½½ã€èµ„æºç¼“å­˜ï¼Œé€Ÿåº¦å¿«ã€‚

### æ¼”ç¤ºå°é²œï¼ˆvueä¸ºä¾‹ï¼‰
1. ç¬¬ä¸€æ­¥ï¼Œåªéœ€è¦åœ¨è¦åŠ è½½è¿œç¨‹åº”ç”¨çš„åœ°æ–¹å¯¼å…¥å³å¯ï¼Œå¦‚ä¸‹ï¼š

```javascript
// router.js
// å®ä¾‹åŒ–ä¸€ä¸ªåŠ è½½å™¨ï¼Œå¹¶ä¸”å®šä¹‰ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œåˆ†åˆ«åœ¨å­åº”ç”¨åŠ è½½å’Œå¸è½½çš„æ—¶å€™æ‰§è¡Œ
import ComponentImport from '@/importor/componentImport'
let { Import } = new ComponentImport()
  .on('mounted', (vm, entry) => {
    console.log(entry + ' in mounted')
  })
  .on('unmounted', (vm, entry) => {
    console.log(entry + ' in unmounted')
  })

const routes = [
  // æ™®é€šæ–¹å¼å¯¼å…¥ç»„ä»¶æ˜¯è¿™æ ·çš„
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/Test1',
    name: 'Test1',
    component: TEST1
  },
  {
    path: '/Test2',
    name: 'Test2',
    component: TEST2
  },
  // è¿œç¨‹åŠ è½½ä¸€ä¸ªå­åº”ç”¨æ˜¯è¿™æ ·çš„ï¼Œå…¶ä¸­TEST3æ˜¯ä¸»åº”ç”¨çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒå°†æˆä¸ºapp3è¿™ä¸ªå­åº”ç”¨çš„å®¿ä¸»ï¼Œå³app3ä¼šæŒ‚è½½åˆ°TEST3
  {
    path: '/Test3/*',
    name: 'Test3',
    component: Import(TEST3, 'app3', {
      origin: 'http://localhost:8081/app3',
      cssScope: true, // æ˜¯å¦å¼€å¯csséš”ç¦»
      proxy: true, // æ˜¯å¦èµ°ä»£ç†è®¿é—®ï¼Œæ¨èä»£ç†ï¼›ç›´è¿è¦è§£å†³é™æ€èµ„æºè·¯å¾„é—®é¢˜
      activeRoute: '/Test3/app3', // å­åº”ç”¨è¿›å»å®ç°æ¿€æ´»çš„è·¯ç”±
      prefix: '', // èµ„æºå‰ç¼€
      pathRewrite: {
        '/app3': '', // èµ„æºpathé‡å†™
      },
    }),
  },
]
```
2.å­åº”ç”¨æ³¨å†Œåˆ°ä¸»åº”ç”¨ä¸­ï¼ˆapp3ä¸ºä¾‹ï¼‰
```javascript
// App.vue
 export default {
    // __isSandBox__ åˆ¤æ–­æ˜¯å¦ä¸ºæ²™ç®±ç¯å¢ƒ
    // registerApp å°†appæ³¨å†Œåˆ°ä¸»åº”ç”¨
    // è¿™äº›å±æ€§ã€æ–¹æ³•éƒ½æ˜¯ç”±æ²™ç®±æä¾›ï¼Œæ— éœ€å¼•å…¥
    created() {
      if (window.__isSandBox__) {
        registerApp(this)
      }
    },
  }
```
3.å­åº”ç”¨webpacké…ç½®ï¼ˆapp3ä¸ºä¾‹ï¼‰

```javascript
module.exports = {
  publicPath: '/app3', // ä¸ºæ‰€æœ‰èµ„æºåŠ ä¸Šapp3/å‰ç¼€ï¼Œå› ä¸ºè¦èµ°ä»£ç†ï¼Œç”¨äºåŒºåˆ†ä¸åŒåº”ç”¨
  devServer: {
    port: '8081',
    headers: {
      'Access-Control-Allow-Origin': '*', // å…è®¸è·¨åŸŸ
    },
  },
}

```
4.ä¸»åº”ç”¨é…ç½®æœ¬åœ°å¼€å‘ä»£ç†ï¼ˆçº¿ä¸Šé…ç½®ç›¸åº”çš„nginxä»£ç†å³å¯ï¼‰

```javascript
module.exports = {
  publicPath: './',
  outputDir: './dist',
  devServer: {
    open: false,
    overlay: {
      warnings: false,
      errors: true,
    },
    proxy: {
      '/app3': {
        target: 'http://localhost:8081/app3',
        changeOrigin: true, // æ˜¯å¦æ”¹å˜åŸŸå
        ws: true,
        pathRewrite: {
          // è·¯å¾„é‡å†™
          '/app3': '', // è¿™ä¸ªæ„æ€å°±æ˜¯ä»¥apiå¼€å¤´çš„ï¼Œå®šå‘åˆ°å“ªé‡Œ, å¦‚æœä½ çš„åè¾¹è¿˜æœ‰è·¯å¾„çš„è¯ï¼Œ ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Š
        },
      },
    },
  },
}

```
####  ç»“æŸäº†ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å’Œå¹³æ—¶å¼€å‘æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œè¿™ä¹Ÿæ­£æ˜¯Importç›¸å¯¹äºå…¶ä»–å¾®å‰ç«¯æ¡†æ¶çš„ä¸€å¤§ç‰¹ç‚¹

### âœ¨æ›´å¤šæŠ€æœ¯ç»†èŠ‚å’Œæ¡†æ¶æ–‡æ¡£å°†åœ¨æ­£å¼ç‰ˆæœ¬å‘å¸ƒåå‘å¸ƒï¼Œæ•¬è¯·æœŸå¾…ï¼âœ¨
